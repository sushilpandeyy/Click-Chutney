<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClickChutney Analytics - Integration Example</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #0A0A0A;
            color: #FAFAFA;
        }
        .container {
            background: #111111;
            border: 1px solid #262626;
            border-radius: 8px;
            padding: 24px;
            margin: 20px 0;
        }
        h1, h2 {
            color: #FAFAFA;
            font-family: 'Poppins', sans-serif;
        }
        h1 {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 2rem;
        }
        .badge {
            background: #3B82F6;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.875rem;
            font-weight: 500;
            display: inline-block;
            margin: 0 8px 8px 0;
        }
        code {
            background: #1A1A1A;
            border: 1px solid #262626;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.875rem;
        }
        pre {
            background: #1A1A1A;
            border: 1px solid #262626;
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.875rem;
        }
        button {
            background: #3B82F6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin: 8px 8px 8px 0;
            transition: all 0.2s;
        }
        button:hover {
            background: #2563EB;
            transform: translateY(-1px);
        }
        .status {
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
            font-family: monospace;
            font-size: 0.875rem;
        }
        .status.success {
            background: #22C55E20;
            border: 1px solid #22C55E;
            color: #22C55E;
        }
        .status.error {
            background: #EF444420;
            border: 1px solid #EF4444;
            color: #EF4444;
        }
        .status.info {
            background: #3B82F620;
            border: 1px solid #3B82F6;
            color: #3B82F6;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }
        .demo-section {
            background: #1A1A1A;
            border: 1px solid #262626;
            border-radius: 8px;
            padding: 16px;
        }
        .demo-section h3 {
            margin-top: 0;
            color: #3B82F6;
            font-size: 1.125rem;
        }
    </style>
</head>
<body>
    <h1>üçõ ClickChutney Analytics</h1>
    <div class="container">
        <p>Integration example and testing page for ClickChutney Analytics tracking script.</p>
        
        <div class="badge">JavaScript SDK</div>
        <div class="badge">Real-time Tracking</div>
        <div class="badge">Session Management</div>
        <div class="badge">CORS Ready</div>
    </div>

    <div class="container">
        <h2>üöÄ Quick Start</h2>
        <p>Add the following script to your website's <code>&lt;head&gt;</code> section:</p>
        
        <pre><code>&lt;!-- ClickChutney Analytics --&gt;
&lt;script&gt;
  (function() {
    window.cc = window.cc || function() {
      (window.cc.q = window.cc.q || []).push(arguments);
    };
    var script = document.createElement('script');
    script.async = true;
    script.src = '/clickchutney-analytics.js';
    document.head.appendChild(script);
  })();

  // Initialize with your tracking ID
  cc('init', {
    trackingId: 'YOUR_TRACKING_ID',
    debug: true // Remove in production
  });
&lt;/script&gt;</code></pre>
    </div>

    <div class="container">
        <h2>üß™ Live Demo</h2>
        <div id="status" class="status info">ClickChutney Analytics Status: Initializing...</div>
        
        <div class="grid">
            <div class="demo-section">
                <h3>üìä Page Tracking</h3>
                <button onclick="trackPageview()">Track Pageview</button>
                <button onclick="trackPageview('/custom-page', 'Custom Page Title')">Track Custom Page</button>
            </div>
            
            <div class="demo-section">
                <h3>üéØ Event Tracking</h3>
                <button onclick="trackEvent('button_click', {section: 'demo', button: 'test'})">Track Button Click</button>
                <button onclick="trackEvent('video_play', {video: 'demo', duration: 120})">Track Video Play</button>
            </div>
            
            <div class="demo-section">
                <h3>üë§ User Identification</h3>
                <button onclick="identifyUser()">Identify User</button>
                <button onclick="identifyUser('demo_user_' + Date.now(), {plan: 'premium'})">Identify with Traits</button>
            </div>
            
            <div class="demo-section">
                <h3>üíì Session Management</h3>
                <button onclick="sendHeartbeat()">Send Heartbeat</button>
                <button onclick="showSession()">Show Session Info</button>
            </div>
        </div>
    </div>

    <div class="container">
        <h2>üìñ API Reference</h2>
        
        <h3>Initialization</h3>
        <pre><code>cc('init', {
  trackingId: 'cc_proj_xxxxx',     // Required: Your project tracking ID
  endpoint: '/api/analytics/collect', // Optional: Custom endpoint
  autoPageview: true,              // Optional: Auto track pageviews
  debug: false,                    // Optional: Enable debug logging
  enableHeartbeat: true,           // Optional: Enable session heartbeat
  heartbeatInterval: 30000         // Optional: Heartbeat interval (ms)
});</code></pre>

        <h3>Page Tracking</h3>
        <pre><code>// Track current page
cc('pageview');

// Track custom page
cc('pageview', '/custom-path', 'Custom Page Title');</code></pre>

        <h3>Event Tracking</h3>
        <pre><code>// Simple event
cc('event', 'button_click');

// Event with properties
cc('event', 'purchase', {
  value: 29.99,
  currency: 'USD',
  product: 'Premium Plan'
});</code></pre>

        <h3>User Identification</h3>
        <pre><code>// Identify user
cc('identify', 'user_123');

// Identify with traits
cc('identify', 'user_123', {
  email: 'user@example.com',
  plan: 'premium',
  signup_date: '2024-01-15'
});</code></pre>
    </div>

    <!-- ClickChutney Analytics Script -->
    <script>
        // Initialize analytics queue
        (function() {
            window.cc = window.cc || function() {
                (window.cc.q = window.cc.q || []).push(arguments);
            };
            
            var script = document.createElement('script');
            script.async = true;
            script.src = '/clickchutney-analytics.js';
            script.onload = function() {
                updateStatus('ClickChutney Analytics loaded successfully!', 'success');
            };
            script.onerror = function() {
                updateStatus('Failed to load ClickChutney Analytics script', 'error');
            };
            document.head.appendChild(script);
        })();

        // Initialize ClickChutney (use a demo tracking ID)
        cc('init', {
            trackingId: 'cc_demo_tracking_id',
            debug: true,
            autoPageview: true
        });

        // Demo functions
        function updateStatus(message, type) {
            const statusEl = document.getElementById('status');
            statusEl.textContent = message;
            statusEl.className = 'status ' + type;
        }

        function trackPageview(page, title) {
            if (page && title) {
                cc('pageview', page, title);
                updateStatus(`Tracked pageview: ${page} - ${title}`, 'success');
            } else {
                cc('pageview');
                updateStatus('Tracked current pageview', 'success');
            }
        }

        function trackEvent(event, properties) {
            cc('event', event, properties);
            updateStatus(`Tracked event: ${event}`, 'success');
        }

        function identifyUser(userId, traits) {
            const id = userId || 'demo_user_' + Math.random().toString(36).substr(2, 9);
            const userTraits = traits || {
                name: 'Demo User',
                email: 'demo@example.com',
                plan: 'free'
            };
            
            cc('identify', id, userTraits);
            updateStatus(`Identified user: ${id}`, 'success');
        }

        function sendHeartbeat() {
            if (window.ClickChutney && window.ClickChutney.heartbeat) {
                window.ClickChutney.heartbeat();
                updateStatus('Heartbeat sent', 'success');
            } else {
                updateStatus('ClickChutney not fully loaded yet', 'error');
            }
        }

        function showSession() {
            if (window.ClickChutney && window.ClickChutney._session) {
                const session = window.ClickChutney._session;
                const duration = Date.now() - session.startTime;
                const message = `Session: ${session.id.slice(-8)}... | Duration: ${Math.floor(duration/1000)}s | Pageviews: ${session.pageviews}`;
                updateStatus(message, 'info');
            } else {
                updateStatus('Session info not available yet', 'error');
            }
        }

        // Auto-update session info every 5 seconds
        setInterval(function() {
            if (window.ClickChutney && window.ClickChutney._session) {
                showSession();
            }
        }, 5000);
    </script>
</body>
</html>